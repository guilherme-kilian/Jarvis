@using Jarvis.Clients
@using Jarvis.Models.Tasks
@using Jarvis.Models.User
@using Microsoft.FluentUI.AspNetCore.Components.Extensions

@inject ITaskClient _taskClient

<MetaProgress Tasks="@_tasks" />

<DayPicker @bind-Date=_date />

@code {
    [Parameter, EditorRequired]
    public UserModel User { get; set; } = null!;

    private List<TasksModel> _tasks = [];

    private DateTime _date = DateTime.Now;

    protected override async Task OnInitializedAsync()
    {
        if (User is null)
            return;

        _tasks = await _taskClient.GetAsync(_date);
    }
}
